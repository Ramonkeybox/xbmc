From 2169fddebc9e856ff600975945e45fb49fb87fce Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Martin=20Storsj=C3=B6?= <martin@martin.st>
Date: Thu, 29 May 2014 14:37:31 +0300
Subject: [PATCH 122/125] aarch64: Use the correct syntax for relocations
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

This fixes building in PIC mode with gas. The examples in the gas
manual showed using a # here even though gas itself actually didn't
support that syntax (and the gas test suite only tests it without
the extra hash sign).

CC: libav-stable@libav.org
Signed-off-by: Martin Storsj√∂ <martin@martin.st>
Signed-off-by: Linus Yang <laokongzi@gmail.com>
---
 libavutil/aarch64/asm.S | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/libavutil/aarch64/asm.S b/libavutil/aarch64/asm.S
index 6c93d11..8ac5c18 100644
--- a/libavutil/aarch64/asm.S
+++ b/libavutil/aarch64/asm.S
@@ -58,8 +58,8 @@ ELF     .size   \name, . - \name
 
 .macro  movrel rd, val
 #if CONFIG_PIC
-        adrp            \rd, #:pg_hi21:\val
-        add             \rd, \rd, #:lo12:\val
+        adrp            \rd, :pg_hi21:\val
+        add             \rd, \rd, :lo12:\val
 #else
         ldr             \rd, =\val
 #endif
-- 
1.9.3

